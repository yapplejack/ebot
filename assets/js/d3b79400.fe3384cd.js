"use strict";(self.webpackChunkeverybot_docs=self.webpackChunkeverybot_docs||[]).push([[1694],{58600:(e,t,l)=>{l.r(t),l.d(t,{default:()=>n});var a=l(67294),r=l(93162),o=l(19194),s=l(5800),i=l(85893);const n=function(){const[e,t]=(0,a.useState)([]),[n,h]=(0,a.useState)([]),[c,p]=(0,a.useState)([]),[d,m]=(0,a.useState)(""),[g,f]=(0,a.useState)(0),[w,b]=(0,a.useState)(!1),[y,u]=(0,a.useState)({}),[x,v]=(0,a.useState)([]),[S,k]=(0,a.useState)([]),[P,$]=(0,a.useState)([]),[A,O]=(0,a.useState)([]),[E,T]=(0,a.useState)([]),j=l(55733)();(0,a.useEffect)((()=>{""!=c&&""!=e&&g==e.length-2&&1==w&&(console.log("called"),I()),0!=g&&g!=e.length-2&&1==w&&R()}),[c,e,g,w]);const L=(t,l)=>{let a="",r=n[t].split(/<div style={{overflow/);for(let o=0;o<r.length;o++)if(r[o].match('.png"')){S[l]=e[parseInt(r[o].split("images/")[1].split('"')[0].split("image")[1].split(".png")[0])],P[l]=r[o].split("images/")[1].split('"')[0].split("image")[1],k(S),$(P);let t=r[o].split("<img")[1].split('.png" ')[1],s='<Image autoLoad={"true"} img={require("/static/media/',i=c[l].split("default}")[0];a+="<div style={{overflow"+r[o].split("<img")[0]+s+i+"default} "+t.split("}}")[0]+', maxWidth: "none"}}'+t.split("}}")[1],l+=1}else if(r[o].match('.jpg"')){S[l]=e[parseInt(r[o].split("images/")[1].split('"')[0].split("image")[1].split(".jpg")[0])],P[l]=r[o].split("images/")[1].split('"')[0].split("image")[1],k(S),$(P);let t=r[o].split("<img")[1].split('.jpg" ')[1],s='<Image autoLoad={"true"} img={require("/static/media/',i=c[l].split("default}")[0];console.log(i),a+="<div style={{overflow"+r[o].split("<img")[0]+s+i+"default} "+t.split("}}")[0]+', maxWidth: "none"}}'+t.split("}}")[1],l+=1}else a+=r[o];return a=a.replaceAll("</img>","</Image>"),a},H=(e,t)=>{let l=e.split(/<div style={{overflow/);e="";for(let a=0;a<l.length;a++)if(l[a].match(/^: 'hidden'/))c[t].match(/left=\"-?(\d+)/i)?parseFloat(c[t].match(/left=\"-?(\d+)/i)[1])>375?e+="<div style={{overflow: 'hidden', float: 'right', "+l[a].split(": 'hidden', ")[1].split(/overflow/)[0]+"float: 'right', overflow: 'hidden', "+l[a].split(/overflow: 'hidden', /)[1]:e+="\n\n<div style={{overflow: 'hidden', float: 'left', "+l[a].split(": 'hidden', ")[1].split(/overflow/)[0]+"float: 'left', overflow: 'hidden', "+l[a].split(/overflow: 'hidden', /)[1]+"\n\n":e+="<div style={{overflow"+l[a],t+=1;else{if(l[a].match(/: 'hidden'/))throw new Error("I thought that overflow hidden would only exist with images or perhaps the image was not wrapped with a span. Please let Jack know you encounter this error.");e+=l[a]}return[e,t]},I=()=>{let e=0;for(let t=0;t<n.length;t++){if(n[t].match(/<div style={{overflow:/)){let l=L(t,e);[E[t],e]=H(l,e)}else E[t]=n[t];T(E)}console.log(E),console.log(P),(()=>{let e="";for(let t=0;t<E.length;t++)e+=E[t]+"\n\n";console.log(e)})(),(()=>{if(S.length>0){console.log(S);for(let e=0;e<S.length;e++)console.log(P[e]),P[e].match(/.jpg/)?j.file("image_"+e+".jpg",S[e]):j.file("image_"+e+".png",S[e]);j.generateAsync({type:"blob"}).then((e=>{(0,r.saveAs)(e,"images.zip")}))}})()},J=function(e){e=e.split("\n").filter((function(e){return e}));let t=0;for(;t<e.length&&!e[t].match(".*/image");)t+=1;let l=[];for(;t<e.length;)l.push(e[t]),t+=1;console.log(l),f(l.length),p(l)},M=async e=>{await e[0].text();t(e);let l=await e[e.length-1].text();!function(e){let t=e.split("table th")[1].match(/(?<=\}).*?(?=\})/g),l=[];for(let r=0;r<t.length;r++){l[r]=t[r].split("{")[0]+" ";let e=l[r].length;t[r].match(/text-align:center/)&&(l[r].length!=e&&(l[r]+=", "),l[r]+="textAlign: 'center'"),t[r].match(/color:/),t[r].match(/font-weight/)&&!t[r].match(/font-weight:400/)&&(l[r].length!=e&&(l[r]+=", "),l[r]+='fontWeight: "'+t[r].match(/(?<=font-weight:).*?(?=;|$|\})/)+'"'),t[r].match(/background-color:/)&&!t[r].match(/background-color:#ffffff/)&&(l[r].length!=e&&(l[r]+=", "),l[r]+='backgroundColor: "#'+t[r].match(/(?<=background-color:#).*?(?=;|$|\})/)+'"'),t[r].match(/font-size/)&&!t[r].match(/font-size:11/)&&(l[r].length!=e&&(l[r]+=", "),l[r]+='fontSize: "'+t[r].match(/(?<=font-size:).*?(?=;|$|\})/)+'"'),t[r].match(/text-decoration/)&&!t[r].match(/text-decoration:none/)&&(l[r].length!=e&&(l[r]+=", "),l[r]+='textDecoration: "'+t[r].match(/(?<=text-decoration:).*?(?=;|$|\})/)+'"'),t[r].match(/padding:/)&&!t[r].match(/0px 0px 0px 0px/)&&(l[r].length!=e&&(l[r]+=", "),l[r]+='padding: "'+t[r].match(/(?<=padding:).*?(?=;|$|\})/)+'"'),t[r].match(/border-bottom-color/)&&(l[r].length!=e&&(l[r]+=", "),l[r]+='border-bottom-color: "'+t[r].match(/(?<=border-bottom-color:).*?(?=;|$|\})/)+'"'),t[r].match(/border-top-width/)&&(l[r].length!=e&&(l[r]+=", "),l[r]+='border-top-width: "'+t[r].match(/(?<=border-top-width:).*?(?=;|$|\})/)+'"'),t[r].match(/border-right-width/)&&(l[r].length!=e&&(l[r]+=", "),l[r]+='border-right-width: "'+t[r].match(/(?<=border-right-width:).*?(?=;|$|\})/)+'"'),t[r].match(/border-left-color/)&&(l[r].length!=e&&(l[r]+=", "),l[r]+='border-left-color: "'+t[r].match(/(?<=border-left-color:).*?(?=;|$|\})/)+'"'),t[r].match(/border-right-color/)&&(l[r].length!=e&&(l[r]+=", "),l[r]+='border-right-color: "'+t[r].match(/(?<=border-right-color:).*?(?=;|$|\})/)+'"'),t[r].match(/border-left-width/)&&(l[r].length!=e&&(l[r]+=", "),l[r]+='border-left-width: "'+t[r].match(/(?<=border-left-width:).*?(?=;|$|\})/)+'"'),t[r].match(/border-top-style/)&&(l[r].length!=e&&(l[r]+=", "),l[r]+='border-top-style: "'+t[r].match(/(?<=border-top-style:).*?(?=;|$|\})/)+'"'),t[r].match(/border-left-style/)&&(l[r].length!=e&&(l[r]+=", "),l[r]+='border-left-style: "'+t[r].match(/(?<=border-left-style:).*?(?=;|$|\})/)+'"'),t[r].match(/border-bottom-width/)&&(l[r].length!=e&&(l[r]+=", "),l[r]+='border-bottom-width: "'+t[r].match(/(?<=border-bottom-width:).*?(?=;|$|\})/)+'"'),t[r].match(/ width/)&&(l[r].length!=e&&(l[r]+=", "),l[r]+='width: "'+t[r].match(/(?<= width:).*?(?=;|$|\})/)+'"'),t[r].match(/border-top-color/)&&(l[r].length!=e&&(l[r]+=", "),l[r]+='border-top-color: "'+t[r].match(/(?<=border-top-color:).*?(?=;|$|\})/)+'"'),t[r].match(/border-bottom-style/)&&(l[r].length!=e&&(l[r]+=", "),l[r]+='border-bottom-style: "'+t[r].match(/(?<=border-bottom-style:).*?(?=;|$|\})/)+'"')}let a={h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,ol:!0,ul:!0,li:!0,a:!0,table:!0,tbody:!0,tr:!0,td:!0};for(let r=0;r<l.length;r++)l[r].match(/\.?\w\d*?\s$/)||a.hasOwnProperty(l[r].match(/\S+/)[0])||(l[r].match(/\S+/)[0].match(/^\.\S+/)?y[l[r].match(/(?<=^\.)\S+/)[0]]=l[r].match(/(?<=\S+\s).*/)[0]:y[l[r].match(/\S+/)[0]]=l[r].match(/(?<=\S+\s).*/)[0]);u(y),console.log(y)}(l.split("/head>")[0]),(async e=>{let t=0,l=0,a=0,r=[],o=(e=e.split("</head>")[1].match(/(?<=>)[\s\S]*/)[0]).match(/(?<=<).*?(?=>|\s)|<^\S*?(?=>|\s)/)[0],s=e.indexOf(o);for(r[t]=e.slice(0,s+1+o.length),e=e.slice(s+1+o.length);"</html>"!=e;){console.log(o),"hr"==o&&(r[t]+=e.slice(0,e.search(">")+1),o=(e=e.slice(e.search(">")+1)).match(/(?<=<).*?(?=>|\s)|<^\S*?(?=>|\s)/)[0],s=e.indexOf(o),t+=1,"<"==e.slice(s+1+o.length)[0]?r[t]=o+">":r[t]=o+" ",r[t]=e.slice(0,s+1+o.length),e=e.slice(s+1+o.length));let l=new RegExp(`(?<=</)${o}(?=>)`),n=new RegExp(`(?<=<)${o}(?=>| )`),h=new RegExp('img alt="[^"].*/');if(e.search(l)>e.search(n)&&-1!=e.search(n))throw new Error("OwO what is this? I was not able to find it in my test cases but you found the something that breaks my code. Please Jack know you 'found nested HTML tags on a doc import'.");if(-1==e.search(l))throw new Error("HMTL not correctly parsed, please contact Jack and send them the HTML with this error message :)");if(e.search(h)<e.search(l)){var i=document.createElement("textarea");i.innerHTML=e.slice(0,e.search(l)+1+o.length).match(/(?<=img alt=")[^"]*/)[0],i.value,console.log(i.value),e="</html>",J(i.value)}else r[t]+=e.slice(0,e.search(l)+1+o.length),o=(e=e.slice(e.search(l)+1+o.length)).match(/(?<=<).*?(?=>|\s)|<^\S*?(?=>|\s)/)[0],s=e.indexOf(o),t+=1,"<"==e.slice(s+1+o.length)[0]?r[t]=o+">":r[t]=o+" ",r[t]=e.slice(0,s+1+o.length),e=e.slice(s+1+o.length);a+=1}console.log(JSON.parse(JSON.stringify(r)));let c={h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,ol:!0,ul:!0,li:!0,a:!0,hr:!0,table:!0,tbody:!0,tr:!0,td:!0};t=0,l=0;let p=!1;for(let d=0;d<r.length-1;d++){let e=r[d].match(/(?<=<).*?(?=>|\s)|<^\S*?(?=>|\s)/),a="",o="",s={},i=!1,m=!1,g=!1,f=!1,w=!1;if(p=!1,n[t]="",r[d].match(/^<[^>]*?\sclass[^>]*?>/)&&!c.hasOwnProperty(e)){let e=r[d].match(/(?<=class=").*?(?=")/)[0].split(" ");for(let l=0;l<e.length;l++)y.hasOwnProperty(e[l])&&0==m?(n[t]="<div style={{ "+y[e[l]],a="div",m=!0,g=!0):y.hasOwnProperty(e[l])&&1==m&&(n[t]+=", "+y[e[l]]);1==m&&(n[t]+="}}>")}if(r[d].match(/^<[^>]*?\sstyle[^>]*?>/)&&"hr"!=e){m=!0,f=!0;const e=/-\webkit\-transform: 'rotate\(\d{1}\.\d{2}rad\) translateZ\(\d{1}px\)',/;let a=r[d].match(/<\/span>/)[0].split("span style")[1].replaceAll(";","',").replaceAll(": ",": '").replaceAll("margin-left","marginLeft").replaceAll("margin-top","marginTop").replace(e,"").replaceAll("border: 0.00px solid #000000,","").replace('="',"").replaceAll(/, -webkit-transform: 'rotate\(-?\d+\.\d+rad\) translateZ\(\d\.?\d*?px\)'[,;]/g,"").replace('px,"',"px").replace(">","}}>").replace('">',"'}}>").replace("style=","style={{ ").replace("px',\"","px'").replace('" title="\'',"").replace('"width',"width");a="<div style={{overflow: 'hidden', display: 'inline-block', margin: '0.00px 0.00px'}}><span style={{"+a+"</img></span></div>",n[t]=a,l+=1,t+=1,n[t]="",w=!0}c.hasOwnProperty(e)&&("hr"==e?(n[t]="<div style={{pageBreakAfter: 'always'}}></div>",w=!0,m=!0):(n[t]="<"+e+">",g=!0,m=!0)),0==m&&(s[e]=!0),r[d]=r[d].replace(/<(?<=<).*?>/,"");let b=0;for(;0==w&&b<5e3;){if(m=!1,r[d].match(/^<[^/]/)){let a=r[d].match(/(?<=<).*?(?=>|\s)|<^\S*?(?=>|\s)/);if(r[d].match(/^<[^>]*?\sclass[^>]*?>/)&&!c.hasOwnProperty(a)&&"h1"!=e){let e=r[d].match(/(?<=class=").*?(?=")/)[0].split(" ");for(let l=0;l<e.length;l++)y.hasOwnProperty(e[l])&&0==g?(n[t]="<span style={{ "+y[e[l]],m=!0,g=!0):y.hasOwnProperty(e[l])&&1==m?n[t]+=", "+y[e[l]]:y.hasOwnProperty(e[l])&&(n[t]+="<span style={{ "+y[e[l]],m=!0);1==m&&("span"==a?(console.log("ignored SPAN "+r[d]),s[a]=!1):"p"==a&&(i=!0),n[t]+="}}>"),r[d]=r[d].replace(/<(?<=<).*?>/,"")}else if(r[d].match(/^<[^>]*?\sstyle[^>]*?>/)&&"hr"!=a){f=!0,m=!0;const e=/-\webkit\-transform: 'rotate\(\d{1}\.\d{2}rad\) translateZ\(\d{1}px\)',/;let a=r[d].match(".*?(?=</)")[0].split("span style")[1].replaceAll(";","',").replaceAll(": ",": '").replaceAll("margin-left","marginLeft").replaceAll("margin-top","marginTop").replace(e,"").replaceAll("border: 0.00px solid #000000,","").replace('="',"").replaceAll(/, -webkit-transform: 'rotate\(-?\d+\.\d+rad\) translateZ\(\d\.?\d*?px\)'[,;]/g,"").replace('px,"',"px").replace(">","}}>").replace('">',"'}}>").replace("style=","style={{ ").replace("px',\"","px'").replace('" title="\'',"").replace('"width',"width");a="<div style={{overflow: 'hidden', display: 'inline-block', margin: '0.00px 0.00px'}}><span style={{"+a+"</img></span></div>",r[d]=r[d].replace(/<(?<=<).*?>/,""),r[d]=r[d].replace(/<(?<=<).*?>/,""),r[d]=r[d].replace(/^<\/.*?>/,""),n[t]+=a,l+=1}else c.hasOwnProperty(a)?(m=!0,"hr"==a?(r[d]=r[d].replace(/<(?<=<).*?>/,""),m=!0,p=!0,console.warn("Please investigate pagebreaks, there may a positioned image attached to one, ask Jack how to fix.\n")):"a"==a?(n[t]+=r[d].match(/<a.*?<\/a>/),r[d]=r[d].replace(/<a.*?<\/a>/,"")):(n[t]+="<"+a+">",r[d]=r[d].replace(/<(?<=<).*?>/,""),console.log(r[d]))):r[d]=r[d].replace(/<(?<=<).*?>/,"");0==m&&(s[a]=!0)}else if(r[d].match(/^<\//)){let l=new RegExp(`(?<=^</)${e}(?=>)`);r[d].match(l)?(w=!0,s.hasOwnProperty(e)&&1==s[e]||(n[t]+=""!=a?"</"+a+">":"</"+e+">")):1==i&&"p"==r[d].match(/(?<=^<\/).*?(?=>)/)&&s.hasOwnProperty("span")&&0==s.span?(n[t]+="</span>",r[d]=r[d].replace(/^<\/.*?>/,""),i=!1):s.hasOwnProperty(r[d].match(/(?<=^<\/).*?(?=>)/))&&1==s[r[d].match(/(?<=^<\/).*?(?=>)/)]?(s[o]=!1,r[d]=r[d].replace(/^<\/.*?>/,"")):(n[t]+=r[d].match(/^<\/.*?>/),r[d]=r[d].replace(/^<\/.*?>/,""))}else g=!0,n[t]+=r[d].match(/.*?(?=<\/)/),r[d]=r[d].replace(/.*?(?=<\/)/,"");b+=1}if(1==w&&(t+=1,1==p&&(console.warn("broke page"),n[t]="<div style={{pageBreakAfter: 'always'}}></div>",t+=1,p=!1)),0==w)throw new Error("Unable to parse HTML at top level item: "+d);h(n)}b(!0),console.log(n)})(l),function(){console.log("in");let e=0,t=[],l=0;for(let a=0;a<n.length;a++)if(""==n[a])e+=1;else if(n[a].match(/(?!.*img)(?!.*pageBreakAfter)(?!.*>[^<]+?<)^<.*?></))e+=1;else{if(e>0){let a="<p>";for(let t=0;t<e;t++)a+="<br /> ";a+="</p>",e=0,t[l]=a,l+=1}t[l]=n[a],l+=1}for(let a=0;a<t.length;a++)n[a]=t[a];n.length=t.length,h(n),console.log(n)}()},R=()=>{if(!(g>=e.length-3))throw console.log(g+" "+e.length),new Error("The number of images supplied does not match the number of images found in the google doc. Please make sure all positioned images are 'move with text' and not 'fix position to page'.");I()},z=()=>{const e=a.useRef(),[t,l]=a.useState([]);return a.useEffect((()=>{const t=new o.QK({a:{extensions:[s.WR],doc:"New Text Here"},b:{doc:"Previous Text Here"},parent:e.current,revertControls:"a-to-b"});l(t)}),[]),(0,i.jsx)("div",{ref:e})};return(0,i.jsxs)("div",{className:"Importer",children:[(0,i.jsx)("center",{children:(0,i.jsx)("input",{multiple:!0,type:"file",onChange:e=>{(async e=>{if(console.log("in"),"md"!=e[0].name.split(".").pop())throw new Error("Please attach your markdown file as the first file (rename it so that it comes first in the file directory");if("html"!=e[e.length-1].name.split(".").pop())throw new Error("Please have your HTML file last (rename it to be last in the file directory)");await M(e)})(e.target.files)}})}),(0,i.jsx)(z,{})]})}}}]);